{% extends "base.html" %}
{% load static %}
{% block contenido %}
  <div class="row my-4 align-items-center justify-content-center">
    
    <!-- Imagen de perfil centrada y redonda -->
    <div class="col-md-4 text-center mb-4 mb-md-0">
      {% if user.foto_perfil %}
        <img src="{{ user.foto_perfil.url }}" 
              class="img-fluid rounded" 
              alt="Foto de perfil" 
              loading="lazy"
              style="max-width: 350px;" />
      {% else %}
        <img src="{% static 'imagenes/user.png' %}" 
              class="img-fluid" 
              alt="Foto de perfil"
              loading="lazy"
              style="max-width: 350px;" />
      {% endif %}
    </div>
    
    <!-- Nombre del usuario -->
    <div class="col-md-6 text-center text-md-start">

        {% if user.first_name %}
          <h2 class="fw-bold display-2 mb-0">{{ user.first_name }}</h2>
          <h2 class="fw-light display-3 mt-0">{{ user.last_name }}</h2>
          <p class="display-6 text-primary">@{{ user.username }}</p>
        {% else %}
          <h2 class="fw-bold display-2 mb-0">@{{ user.username }}</h2>
        {% endif %}
        <a href="{% url 'account_update_profile' %}" class="btn btn-outline-dark btn-sm"><i class="fa-solid fa-pen-to-square"></i> Editar perfil</a>
    </div>
  </div>
  <div class="row my-4 g-3">
    <h3 class="text-center col-12 my-3 display-4">Inscripciones</h3>
    <div class="col-md-6 col-12">
      <table class="table table-striped table-bordered text-center">
        <thead>
          <tr>
            <th>Nombre del Curso</th>
            <th>Fecha de Inscripción</th>
          </tr>
        </thead>
        <tbody>
          {% for curso in cursos %}
            <tr>
              <td><a href="{% url 'cursos:detalle_curso' curso.curso.id %}">{{ curso.curso.nombre }}</a></td>
              <td>{{ curso.fecha_inscripcion|date:"d M Y" }}</td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="2" class="text-center">Aun no te has inscrito a un curso.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="col-md-6 col-12">
      <table class="table table-striped table-bordered text-center">
        <thead>
          <tr>
            <th>Nombre de la Clase</th>
            <th>Fecha de Inscripción</th>
          </tr>
        </thead>
        <tbody>
          {% for curso in cursos %}
            <tr>
              <td><a href="{% url 'cursos:detalle_curso' curso.curso.id %}">{{ curso.curso.nombre }}</a></td>
              <td>{{ curso.fecha_inscripcion|date:"d M Y" }}</td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="2" class="text-center">No encontramos tu nombre en ninguna clase.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="row my-4">
    <div class="col-12">
      <h3 class="display-4">Historial de Pagos</h3>
      <p class="text-muted">Aquí puedes ver el historial de tus pagos realizados en la plataforma.</p>
    </div>
    <div class="col-12 my-3">
      <table class="table table-striped table-bordered text-center">
        <thead>
          <tr>
            <th>Fecha de Pago</th>
            <th>Monto</th>
            <th>Descripción</th>
          </tr>
        </thead>
        <tbody>
          {% for pago in pagos %}
            <tr>
              <td>{{ pago.fecha|date:"d M Y" }}</td>
              <td>{{ pago.monto }}</td>
              <td>{{ pago.descripcion }}</td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="3" class="text-center">No se encontraron pagos registrados.</td>
            </tr>
          {% endfor %}
        </tbody>

      </table>
    </div>
  </div>
{% endblock contenido %}
